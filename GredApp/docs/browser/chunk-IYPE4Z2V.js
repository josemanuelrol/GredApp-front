import{a as K}from"./chunk-JYU3FD7Z.js";import{a as J}from"./chunk-OHSN5WVE.js";import"./chunk-UQKURZOD.js";import{$a as A,A as L,Aa as D,Ca as H,E as w,K as N,M as P,Ma as j,Na as U,Ra as V,Sa as $,T as O,Xa as q,bb as G,f as p,h as x,ha as T,i as v,j as I,l,m as M,n as g,o as y,p as S,ra as k,s as i,sa as R,t as r,ta as E,u,v as b,va as F,w as c,x as m,xa as B,y as d,z as _,za as z}from"./chunk-CJIFZG57.js";import"./chunk-A3OJPA2C.js";import"./chunk-7KGURMOZ.js";import"./chunk-C2IFOWZX.js";import"./chunk-GKGVIQI6.js";import"./chunk-A4HLURUV.js";import"./chunk-G3CV3VGG.js";import"./chunk-JGR3S45Q.js";import"./chunk-ZXS6RTUS.js";import"./chunk-RT2Q4DHF.js";import"./chunk-4U6PRYVA.js";import"./chunk-BE36LD5W.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{e as C}from"./chunk-XD4PSF4R.js";function Q(n,o){if(n&1){let a=b();i(0,"ion-card",11),c("click",function(){let t=v(a).$implicit,s=m(2);return I(s.onClick(t))}),i(1,"ion-card-header")(2,"ion-card-title"),d(3),r()(),i(4,"ion-card-content"),d(5),r()()}if(n&2){let a=o.$implicit;l(3),_(a.titulo),l(2),L(" ",a.contenido," ")}}function W(n,o){if(n&1&&(i(0,"div",9),g(1,Q,6,2,"ion-card",10),r()),n&2){let a=m();l(),y("ngForOf",a.notesListResult)("ngForTrackBy",a.trackItems)}}function X(n,o){if(n&1&&(i(0,"div",12)(1,"h2"),d(2),r()()),n&2){let a=m();l(2),_(a.emptyMessage)}}var ce=(()=>{let o=class o{constructor(e){this.loadingController=e,this.notesService=p(K),this.router=p(O),this.toastService=p(J),this.emptyMessage="",this.notesService.onDataUpdate().subscribe(()=>this.loadNotes()),this.notesList=[],this.notesListResult=[...this.notesList],this.userId=localStorage.getItem("userID")}ngOnInit(){this.loadNotes()}loadNotes(){this.showLoading(),this.notesService.getNotesByUser(this.userId).then(e=>{this.notesList=e,this.notesListResult=[...this.notesList],this.emptyMessage="No tienes notas todav\xEDa",this.loadingController.dismiss()}).catch(e=>{this.loadingController.dismiss(),this.toastService.presentErrorToast("top","Ha ocurrido un error")})}handleRefresh(e){this.notesService.getNotesByUser(this.userId).then(t=>{this.notesList=t,this.notesListResult=[...this.notesList],e.target.complete()}).catch(t=>{this.toastService.presentErrorToast("top","Ha ocurrido un error")})}handleInput(e){let t=e.target.value.toLowerCase();this.notesListResult=this.notesList.filter(s=>s.titulo.toLowerCase().indexOf(t)>-1)}showLoading(){return C(this,null,function*(){(yield this.loadingController.create({message:"Loading..."})).present()})}trackItems(e,t){return t._id}onClick(e){this.router.navigate(["app/notes/note-detail"],{state:{key:e._id.$oid,data:e}})}createNote(){this.router.navigate(["app/notes/note-detail"],{state:{key:0,data:{titulo:"",contenido:""}}})}};o.\u0275fac=function(t){return new(t||o)(M(q))},o.\u0275cmp=x({type:o,selectors:[["app-notes-main"]],standalone:!0,features:[w],decls:14,vars:1,consts:[["collapse","condense",1,"ion-no-border"],["color","light",1,"ion-padding-top"],["size","large"],["color","light"],["placeholder","Buscar","animated","true","inputmode","search",3,"ionInput"],["slot","fixed",3,"ionRefresh"],["slot","fixed","vertical","bottom","horizontal","end"],["size","small","color","danger",3,"click"],["name","add"],[1,"notes-container"],["button","",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],["button","",3,"click"],[1,"emptyMessage"]],template:function(t,s){t&1&&(i(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2),d(3," Notas "),r()(),i(4,"ion-toolbar",3)(5,"ion-searchbar",4),c("ionInput",function(h){return s.handleInput(h)}),r()()(),i(6,"ion-content",3)(7,"ion-refresher",5),c("ionRefresh",function(h){return s.handleRefresh(h)}),u(8,"ion-refresher-content"),r(),i(9,"ion-fab",6)(10,"ion-fab-button",7),c("click",function(){return s.createNote()}),u(11,"ion-icon",8),r()(),g(12,W,2,2,"div",9)(13,X,3,1),r()),t&2&&(l(12),S(12,s.notesListResult.length?12:13))},dependencies:[U,j,D,z,A,F,R,E,k,G,B,H,V,$,P,N,T],styles:[".notes-container[_ngcontent-%COMP%]{display:grid;gap:16px;padding:16px;grid-template-columns:repeat(auto-fit,minmax(150px,1fr))}.emptyMessage[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.emptyMessage[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600}ion-card[_ngcontent-%COMP%]{margin:0}ion-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding:12px 12px 4px}ion-card[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{font-size:22px;text-overflow:ellipsis;overflow:hidden;text-wrap:nowrap}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:4px 12px 12px;text-wrap:nowrap;overflow:hidden;text-overflow:ellipsis}"]});let n=o;return n})();export{ce as NotesMainPage};
