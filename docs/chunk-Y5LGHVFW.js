import{a as st}from"./chunk-OHSN5WVE.js";import{a as at}from"./chunk-UQKURZOD.js";import{$ as C,A as $,Ba as z,Ca as G,E as I,Ea as W,Fa as J,Ga as K,Ha as Q,Ia as X,Ja as Y,N as O,Oa as Z,Ra as tt,Sa as et,Ua as v,Y as A,Z as V,Za as it,a as h,ab as nt,b as r,c as S,ca as P,cb as ot,f as k,g as D,h as f,ha as B,i as _,ia as j,j as g,k as y,l,m as b,n as w,o as u,p as L,pa as N,q as E,qa as H,r as M,s,t as a,u as U,v as F,w as m,wa as R,x as T,xa as q,y as d}from"./chunk-CJIFZG57.js";import{e as x}from"./chunk-XD4PSF4R.js";var lt=(()=>{let i=class i{constructor(){this.dataUpdatedNewTask=new h,this.dataUpdatedDeleteTask=new h,this.dataUpdatedCheckedTask=new h,this.dataUpdatedList=new h,this.baseUrlApi=at.baseUrlApi,this.http=k(O)}createTaskList(t){return r(this.http.post(`${this.baseUrlApi}/listaTareas`,t))}getAllTaskLists(){return r(this.http.get(`${this.baseUrlApi}/listasTareas`))}getTaskListById(t){return r(this.http.get(`${this.baseUrlApi}/listaTareas/${t}`))}getTasksByUser(t){return r(this.http.get(`${this.baseUrlApi}/user/${t}/listaTareas`))}updateTaskList(t,e){return r(this.http.put(`${this.baseUrlApi}/listaTareas/${t}`,e))}deleteTaskList(t){return r(this.http.delete(`${this.baseUrlApi}/listaTareas/${t}`))}getTasks(t){return r(this.http.get(`${this.baseUrlApi}/listaTareas/${t}/getTasks`))}getCompletedTasks(t){return r(this.http.get(`${this.baseUrlApi}/listaTareas/getCompletedTasks/${t}`))}getTaskById(t,e){return r(this.http.get(`${this.baseUrlApi}/listaTareas/${t}/getTask/${e}`))}addTask(t,e){return r(this.http.put(`${this.baseUrlApi}/listaTareas/${t}/addTask`,e))}updateTask(t,e,n){return r(this.http.put(`${this.baseUrlApi}/listaTareas/${t}/updateTask/${e}`,n))}deleteTask(t,e){return r(this.http.put(`${this.baseUrlApi}/listaTareas/${t}/deleteTask/${e}`,{}))}emitDataUpdatedList(){this.dataUpdatedList.next()}onDataUpdateList(){return this.dataUpdatedList.asObservable()}emitDataUpdateNewTask(){this.dataUpdatedNewTask.next()}onDataUpdateNewTask(){return this.dataUpdatedNewTask.asObservable()}emitDataUpdateDeleteTask(){this.dataUpdatedDeleteTask.next()}onDataUpdateDeleteTask(){return this.dataUpdatedDeleteTask.asObservable()}emitDataUpdateCheckedTask(){this.dataUpdatedCheckedTask.next()}onDataUpdateCheckedTask(){return this.dataUpdatedCheckedTask.asObservable()}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();var ct=(()=>{let i=class i{constructor(t){this.modalCtrl=t,this.tituloControl=new C,this.descripcionControol=new C}ngOnInit(){this.tituloControl=new C(this.data.titulo,A.required),this.descripcionControol=new C(this.data.descripcion)}cancel(){return this.modalCtrl.dismiss(null,"cancel")}confirm(){let t={titulo:this.tituloControl.getRawValue(),descripcion:this.descripcionControol.getRawValue()};return this.modalCtrl.dismiss(t,"confirm")}};i.\u0275fac=function(e){return new(e||i)(b(v))},i.\u0275cmp=f({type:i,selectors:[["app-task-detail"]],inputs:{data:"data"},standalone:!0,features:[I],decls:18,vars:5,consts:[["collapse","condense",1,"ion-no-border"],["color","light"],["slot","start"],["strong","true","color","dark",3,"click"],["slot","end"],["color","primary",3,"click","disabled","strong"],["color","light",1,"ion-padding"],["fixed","true"],["placeholder","Introduce el t\xEDtulo de la tarea","errorText","El t\xEDtulo es requerido",3,"formControl"],["label","Descripci\xF3n","labelPlacement","floating","placeholder","Escribe algo aqui...",3,"formControl","autoGrow"]],template:function(e,n){e&1&&(s(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),m("click",function(){return n.cancel()}),d(4,"Volver"),a()(),s(5,"ion-title"),d(6,"Detalles"),a(),s(7,"ion-buttons",4)(8,"ion-button",5),m("click",function(){return n.confirm()}),d(9,"Confirmar"),a()()()(),s(10,"ion-content",6)(11,"ion-grid",7)(12,"ion-row")(13,"ion-col"),U(14,"ion-input",8),a()(),s(15,"ion-row")(16,"ion-col"),U(17,"ion-textarea",9),a()()()()),e&2&&(l(8),u("disabled",n.tituloControl.getRawValue()===n.data.titulo&&n.descripcionControol.getRawValue()===n.data.descripcion)("strong",!0),l(6),u("formControl",n.tituloControl),l(3),u("formControl",n.descripcionControol)("autoGrow",!0))},dependencies:[B,V,ot,R,z,Z,j,P,nt,q,tt,N,H,et,G],styles:["ion-input[_ngcontent-%COMP%]{font-size:26px;font-weight:800}"]});let o=i;return o})();var mt=(o,i)=>i._id;function ut(o,i){if(o&1&&(s(0,"ion-label"),d(1),a()),o&2){let p=T().$implicit;l(),$(" ",p.descripcion," ")}}function ht(o,i){if(o&1){let p=F();s(0,"ion-item-sliding")(1,"ion-item",2)(2,"ion-checkbox",3),m("ionChange",function(e){let n=_(p).$implicit,c=T();return g(c.onClick(n,e))}),s(3,"ion-label"),d(4),a(),w(5,ut,2,1,"ion-label"),a()(),s(6,"ion-item-options")(7,"ion-item-option",4),m("click",function(){let e=_(p).$implicit,n=T();return g(n.openModal(e))}),d(8,"Editar"),a(),s(9,"ion-item-option",5),m("click",function(){let e=_(p).$implicit,n=T();return g(n.onDelete(e))}),d(10,"Eliminar"),a()()()}if(o&2){let p=i.$implicit;l(2),u("checked",p.completed),l(2),$(" ",p.titulo," "),l(),L(5,p.descripcion?5:-1)}}function kt(o,i){o&1&&(s(0,"ion-label"),d(1,"No tienes tareas pendientes"),a())}var Qt=(()=>{let i=class i{constructor(t){this.modalController=t,this.taskListService=k(lt),this.toastService=k(st),this.mainTaskList=y.required(),this.emptyMessage=""}ngOnInit(){console.log()}onDelete(t){this.taskListService.deleteTask(this.mainTaskList()._id.$oid,t._id.$oid).then(e=>{this.toastService.presentSuccessToast("top","Tarea eliminada"),this.taskListService.emitDataUpdateDeleteTask()}).catch(e=>{this.toastService.presentErrorToast("top","Ha ocurrido un error")})}onClick(t,e){return x(this,null,function*(){let n={completed:e.detail.checked};yield this.taskListService.updateTask(this.mainTaskList()._id.$oid,t._id.$oid,n).then(c=>{this.taskListService.emitDataUpdateCheckedTask()}).catch(c=>{this.toastService.presentErrorToast("top","Ha ocurrido un error")})})}openModal(t){return x(this,null,function*(){let e=yield this.modalController.create({component:ct,componentProps:{data:t}});e.present();let{data:n,role:c}=yield e.onWillDismiss();c==="confirm"&&this.taskListService.updateTask(this.mainTaskList()._id.$oid,t._id.$oid,n).then(dt=>{this.taskListService.emitDataUpdateNewTask()}).catch(dt=>{this.toastService.presentErrorToast("top","Ha ocurrido un error")})})}};i.\u0275fac=function(e){return new(e||i)(b(v))},i.\u0275cmp=f({type:i,selectors:[["app-task-list"]],inputs:{mainTaskList:[D.SignalBased,"mainTaskList"]},standalone:!0,features:[I],decls:5,vars:1,consts:[[1,"mainTaskList"],["inset","true"],["lines","none"],["color","danger","labelPlacement","end","justify","start",3,"ionChange","checked"],["color","primary",3,"click"],["color","danger",3,"click"]],template:function(e,n){if(e&1&&(s(0,"div",0)(1,"ion-list",1),E(2,ht,11,3,"ion-item-sliding",null,mt),a(),w(4,kt,2,0,"ion-label"),a()),e&2){let c;l(2),M(n.mainTaskList().tareas),l(2),L(4,(c=n.mainTaskList().tareas)!=null&&c.length?-1:4)}},dependencies:[J,K,it,W,Q,X,Y],styles:[".mainTaskList[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mainTaskList[_ngcontent-%COMP%] > ion-label[_ngcontent-%COMP%]{padding-left:16px;font-size:18px;font-weight:500;margin-bottom:4px;margin-top:-2rem}ion-item-sliding[_ngcontent-%COMP%]{border-radius:6px}ion-modal[_ngcontent-%COMP%]{--height: auto}.block[_ngcontent-%COMP%]{height:300px}ion-checkbox[_ngcontent-%COMP%] > ion-label[_ngcontent-%COMP%]:nth-child(2){font-size:14px;opacity:.6}"]});let o=i;return o})();export{lt as a,Qt as b};
